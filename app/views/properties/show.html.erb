<body class="property-show-page">
  <div class="property-show-header">
    <h1 class="property-show-title"><%= @property.direccion.capitalize %></h1>
  </div>

  <div class="property-show-wrapper">
    <main class="property-show-main">
      <div class="show_container">
        <section class="gallery">
          <div class="slider-container">
            <div class="slider-track">
              <% @property.photos.each do |photo| %>
                <%= cl_image_tag photo.key,
                      loading: "lazy",
                      alt: "Foto de la propiedad en #{@property.direccion}",
                      class: "slider-image" %>
              <% end %>
            </div>

            <button class="slider-btn prev" aria-label="Imagen anterior">‹</button>
            <button class="slider-btn next" aria-label="Siguiente imagen">›</button>
          </div>
        </section>

        <section class="details">
          <h2 class="details-title">Más detalles:</h2>
          
          <div class="details-content">
            <div class="details-list">
              <div class="detail-item">
                <span class="material-symbols-outlined">home_pin</span>
                <p><strong>Dirección:</strong> <%= @property.direccion %></p>
              </div>

              <div class="detail-item">
                <i class="fa-solid fa-map-location-dot"></i>
                <p><strong>Colonia:</strong> <%= @property.colonia %></p>
              </div>

              <div class="detail-item">
                <span class="material-symbols-outlined">door_front</span>
                <p><strong>Cuartos:</strong> <%= @property.cuartos %></p>
              </div>

              <div class="detail-item">
                <span class="material-symbols-outlined">wc</span>
                <p><strong>Baños:</strong> <%= @property.banos %></p>
              </div>

              <div class="detail-item detail-item--extras">
                <span class="material-symbols-outlined">format_align_justify</span>
                <p><strong>Extras:</strong> <%= @property.extras %></p>
              </div>

              <div class="detail-price">
                <p><%= number_to_currency(@property.precio, unit: "$", separator: ".", delimiter: ",") %></p>
              </div>
            </div>
          </div>

          <div class="details-footer">
            <% whatsapp_msg = "Hola, me interesa reservar una cita para la propiedad en #{@property.direccion}" %>
            <a href="https://wa.me/524777309939?text=<%= URI.encode_www_form_component(whatsapp_msg) %>" 
               target="_blank" 
               rel="noopener noreferrer"
               class="btn-reservar">
              <i class="fa-brands fa-whatsapp"></i>
              Reservar una cita
            </a>
          </div>
        </section>
      </div>
      
      <div class="property-show-footer">
        <%= link_to properties_path, class: "btn-back" do %>
          <i class="fa-solid fa-arrow-left"></i>
          Regresar al catálogo
        <% end %>
        
        <% if account_signed_in? %>
          <div class="admin-actions-show">
            <%= link_to "Editar", edit_property_path(@property), class: "btn-edit" %>
            <%= button_to "Eliminar", 
                property_path(@property), 
                method: :delete, 
                data: { confirm: "¿Estás seguro de eliminar esta propiedad?" },
                class: "btn-delete" %>
          </div>
        <% end %>
      </div>
    </main>
  </div>
</body>